{% extends "layouts/base.html" %}

{% block title %}Crea tu perfil - ProfesionalTAP{% endblock %}

{% block content %}
<section class="form-page">
    <div class="form-card form-card-wide">
        <h1>Crea tu perfil profesional</h1>
        <p class="form-subtitle">Completa tus datos, añade tus servicios y genera tu QR en segundos.</p>

        <form method="POST">
            {{ form.hidden_tag() }}

            <!-- Sección: Tu perfil -->
            <div class="fields-header">
                <h3>Tu perfil</h3>
            </div>

            <div class="form-group">
                {{ form.sector.label }}
                {{ form.sector(class="form-control") }}
                {% for error in form.sector.errors %}
                <span class="form-error">{{ error }}</span>
                {% endfor %}
            </div>

            <div class="form-group">
                {{ form.contact_name.label }}
                {{ form.contact_name(class="form-control", placeholder="Ej: María García López") }}
                {% for error in form.contact_name.errors %}
                <span class="form-error">{{ error }}</span>
                {% endfor %}
            </div>

            <div class="form-group">
                {{ form.phone.label }}
                {{ form.phone(class="form-control", placeholder="Ej: +34 612 345 678") }}
                {% for error in form.phone.errors %}
                <span class="form-error">{{ error }}</span>
                {% endfor %}
            </div>

            <div class="form-group">
                {{ form.email.label }}
                {{ form.email(class="form-control", placeholder="Ej: maria@despachogarcia.es") }}
                {% for error in form.email.errors %}
                <span class="form-error">{{ error }}</span>
                {% endfor %}
            </div>

            <div class="form-group">
                {{ form.linkedin.label }}
                {{ form.linkedin(class="form-control", placeholder="Ej: https://linkedin.com/in/mariagarcia") }}
                {% for error in form.linkedin.errors %}
                <span class="form-error">{{ error }}</span>
                {% endfor %}
            </div>

            <div class="form-group">
                {{ form.website.label }}
                {{ form.website(class="form-control", placeholder="Ej: https://despachogarcia.es") }}
                {% for error in form.website.errors %}
                <span class="form-error">{{ error }}</span>
                {% endfor %}
            </div>

            <!-- Sección: Tus servicios -->
            <div class="fields-header" style="margin-top: 1.5rem;">
                <h3>Tus servicios</h3>
                <p class="form-hint">Describe hasta 3 servicios que ofreces. Solo necesitas el título.</p>
            </div>

            <!-- Servicio 1 (siempre visible) -->
            <div class="service-block" id="service-1">
                <div class="form-group">
                    {{ form.service_1_title(class="form-control", placeholder="Ej: Consultoría legal") }}
                </div>
                <div class="form-group">
                    {{ form.service_1_description(class="form-control", rows=2, placeholder="Breve descripción (opcional)") }}
                </div>
            </div>

            <!-- Servicio 2 (oculto por defecto) -->
            <div class="service-block" id="service-2" style="display:none;">
                <div class="form-group">
                    {{ form.service_2_title(class="form-control", placeholder="Ej: Redacción de contratos") }}
                </div>
                <div class="form-group">
                    {{ form.service_2_description(class="form-control", rows=2, placeholder="Breve descripción (opcional)") }}
                </div>
            </div>

            <!-- Servicio 3 (oculto por defecto) -->
            <div class="service-block" id="service-3" style="display:none;">
                <div class="form-group">
                    {{ form.service_3_title(class="form-control", placeholder="Ej: Defensa en juicio") }}
                </div>
                <div class="form-group">
                    {{ form.service_3_description(class="form-control", rows=2, placeholder="Breve descripción (opcional)") }}
                </div>
            </div>

            <button type="button" class="btn btn-secondary" id="add-service-btn" onclick="addService()">
                + Añadir servicio
            </button>

            <div style="margin-top: 1.5rem;">
                {{ form.submit(class="btn btn-block") }}
            </div>
        </form>
    </div>
</section>

<script>
    var nextService = 2;
    function addService() {
        if (nextService > 3) return;
        document.getElementById('service-' + nextService).style.display = 'block';
        nextService++;
        if (nextService > 3) {
            document.getElementById('add-service-btn').style.display = 'none';
        }
    }
</script>
{% endblock %}
